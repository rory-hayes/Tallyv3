-- READ / WRITE role (for MCP primary)
CREATE ROLE mcp_rw LOGIN PASSWORD 'TallyDevPG_2026!';

GRANT CONNECT ON DATABASE tally TO mcp_rw;
GRANT USAGE ON SCHEMA public TO mcp_rw;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO mcp_rw;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO mcp_rw;
GRANT ALL PRIVILEGES ON ALL FUNCTIONS IN SCHEMA public TO mcp_rw;

ALTER DEFAULT PRIVILEGES IN SCHEMA public
GRANT ALL ON TABLES TO mcp_rw;

-- READ-ONLY role (optional but recommended)
CREATE ROLE mcp_ro LOGIN PASSWORD 'TallyDevPG_2026!';

GRANT CONNECT ON DATABASE tally TO mcp_ro;
GRANT USAGE ON SCHEMA public TO mcp_ro;
GRANT SELECT ON ALL TABLES IN SCHEMA public TO mcp_ro;

ALTER DEFAULT PRIVILEGES IN SCHEMA public
GRANT SELECT ON TABLES TO mcp_ro;
